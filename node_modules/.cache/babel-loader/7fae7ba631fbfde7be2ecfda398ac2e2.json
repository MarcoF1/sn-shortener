{"remainingRequest":"/Users/marco/code/sn-shortener/node_modules/babel-loader/lib/index.js!/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marco/code/sn-shortener/src/components/CreateShortForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marco/code/sn-shortener/src/components/CreateShortForm.vue","mtime":1604368890097},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICIuLi9tYWluIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVTaG9ydEZvcm0iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgc2hvcnROYW1lOiAiIiwKICAgICAgdXJsOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVNob3J0OiBmdW5jdGlvbiBjcmVhdGVTaG9ydCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5zaG9ydE5hbWUgPT09ICIiIHx8IHRoaXMudXJsID09PSAiIikgewogICAgICAgIGlmICh0aGlzLnNob3J0TmFtZSA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIlNob3J0IG5hbWUgaXMgcmVxdWlyZWQiKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnVybCA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIlVSTCBpcyByZXF1aXJlZCIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGJvZHlDb250ZW50ID0gewogICAgICAgICAgc2hvcnROYW1lOiB0aGlzLnNob3J0TmFtZSwKICAgICAgICAgIHVybDogdGhpcy51cmwKICAgICAgICB9OwogICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvc2hvcnRzIiwgYm9keUNvbnRlbnQpLnRoZW4oZnVuY3Rpb24gKHNob3J0KSB7CiAgICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgICAgX3RoaXMuc3VjY2VzcyA9ICJTaG9ydCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEiOwogICAgICAgICAgZXZlbnRCdXMuJGVtaXQoImNyZWF0ZS1zaG9ydC1zdWNjZXNzIiwgc2hvcnQpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3IpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gYWx3YXlzIGV4ZWN1dGVkCiAgICAgICAgICBfdGhpcy5yZXNldEZvcm0oKTsKCiAgICAgICAgICBfdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHsKICAgICAgdGhpcy5zaG9ydE5hbWUgPSAiIjsKICAgICAgdGhpcy51cmwgPSAiIjsKICAgIH0sCiAgICBjbGVhck1lc3NhZ2VzOiBmdW5jdGlvbiBjbGVhck1lc3NhZ2VzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuZXJyb3JzID0gW107CiAgICAgICAgX3RoaXMyLnN1Y2Nlc3MgPSAiIjsKICAgICAgfSwgNTAwMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["CreateShortForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,GAAA,EAAA;AAJA,KAAA;AAMA,GAVA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,WAAA,MAAA,GAAA,EAAA;;AAEA,UAAA,KAAA,SAAA,KAAA,EAAA,IAAA,KAAA,GAAA,KAAA,EAAA,EAAA;AACA,YAAA,KAAA,SAAA,KAAA,EAAA,EAAA;AACA,eAAA,MAAA,CAAA,IAAA,CAAA,wBAAA;AACA;;AAEA,YAAA,KAAA,GAAA,KAAA,EAAA,EAAA;AACA,eAAA,MAAA,CAAA,IAAA,CAAA,iBAAA;AACA;;AAEA,aAAA,aAAA;AACA,OAVA,MAUA;AACA,YAAA,WAAA,GAAA;AAAA,UAAA,SAAA,EAAA,KAAA,SAAA;AAAA,UAAA,GAAA,EAAA,KAAA;AAAA,SAAA;AACA,QAAA,KAAA,CACA,IADA,CACA,aADA,EACA,WADA,EAEA,IAFA,CAEA,UAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,6BAAA;AACA,UAAA,QAAA,CAAA,KAAA,CAAA,sBAAA,EAAA,KAAA;AACA,SANA,EAOA,KAPA,CAOA,UAAA,GAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,SAVA,EAWA,IAXA,CAWA,YAAA;AACA;AACA,UAAA,KAAA,CAAA,SAAA;;AACA,UAAA,KAAA,CAAA,aAAA;AACA,SAfA;AAgBA;AACA,KAjCA;AAmCA,IAAA,SAAA,EAAA,qBAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,GAAA,GAAA,EAAA;AACA,KAtCA;AAwCA,IAAA,aAAA,EAAA,yBAAA;AAAA;;AACA,MAAA,WAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,EAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA;AA7CA;AAZA,CAAA","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"header primary-header\">\n      URL Shortener\n    </div>\n    <div class=\"short-form-container\">\n      <!-- the submit event will no longer reload the page -->\n      <form id='create-short' v-on:submit.prevent='createShort' method='post'>\n\n        <input id='name' v-model.trim='shortName' type='text' name='shortName'  placeholder=\"Enter Short Name\">\n        <input id='url' v-model.trim='url' type='url' name='url' placeholder=\"Enter URL\">\n\n        <input type='submit' value=\"Create Short\" id=\"createFreet\" class=\"button\">\n\n        <div v-if='success' class=\"success-message\">\n          {{ success }}\n        </div>\n\n        <div v-if='errors.length' class=\"error-message\">\n          <b>Please correct the following error(s):</b>\n          <ul>\n            <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n          </ul>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"CreateShortForm\",\n\n  data() {\n    return {\n      errors: [],\n      success: \"\",\n      shortName: \"\",\n      url: \"\"\n    };\n  },\n\n  methods: {\n    createShort: function() {\n      this.errors = [];\n\n      if (this.shortName === \"\" || this.url === \"\") {\n        if (this.shortName === \"\") {\n          this.errors.push(\"Short name is required\");\n        }\n\n        if (this.url === \"\") {\n          this.errors.push(\"URL is required\");\n        }\n\n        this.clearMessages();\n      } else {\n        const bodyContent = { shortName: this.shortName, url: this.url };\n        axios\n          .post(\"/api/shorts\", bodyContent)\n          .then(short => {\n            // handle success\n            this.success = \"Short created successfully!\";\n            eventBus.$emit(\"create-short-success\", short);\n          })\n          .catch(err => {\n            // handle error\n            this.errors.push(err.response.data.error);\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n\n    resetForm: function() {\n      this.shortName = \"\";\n      this.url = \"\";\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n        this.success = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/components"}]}