{"remainingRequest":"/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marco/code/sn-shortener/src/components/CreateShortForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marco/code/sn-shortener/src/components/CreateShortForm.vue","mtime":1604368890097},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAiLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNyZWF0ZVNob3J0Rm9ybSIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICBzdWNjZXNzOiAiIiwKICAgICAgc2hvcnROYW1lOiAiIiwKICAgICAgdXJsOiAiIgogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBjcmVhdGVTaG9ydDogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5zaG9ydE5hbWUgPT09ICIiIHx8IHRoaXMudXJsID09PSAiIikgewogICAgICAgIGlmICh0aGlzLnNob3J0TmFtZSA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIlNob3J0IG5hbWUgaXMgcmVxdWlyZWQiKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnVybCA9PT0gIiIpIHsKICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goIlVSTCBpcyByZXF1aXJlZCIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB7IHNob3J0TmFtZTogdGhpcy5zaG9ydE5hbWUsIHVybDogdGhpcy51cmwgfTsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QoIi9hcGkvc2hvcnRzIiwgYm9keUNvbnRlbnQpCiAgICAgICAgICAudGhlbihzaG9ydCA9PiB7CiAgICAgICAgICAgIC8vIGhhbmRsZSBzdWNjZXNzCiAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9ICJTaG9ydCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEiOwogICAgICAgICAgICBldmVudEJ1cy4kZW1pdCgiY3JlYXRlLXNob3J0LXN1Y2Nlc3MiLCBzaG9ydCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVyci5yZXNwb25zZS5kYXRhLmVycm9yKTsKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIC8vIGFsd2F5cyBleGVjdXRlZAogICAgICAgICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuc2hvcnROYW1lID0gIiI7CiAgICAgIHRoaXMudXJsID0gIiI7CiAgICB9LAoKICAgIGNsZWFyTWVzc2FnZXM6IGZ1bmN0aW9uKCkgewogICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgICAgICB0aGlzLnN1Y2Nlc3MgPSAiIjsKICAgICAgfSwgNTAwMCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["CreateShortForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateShortForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"header primary-header\">\n      URL Shortener\n    </div>\n    <div class=\"short-form-container\">\n      <!-- the submit event will no longer reload the page -->\n      <form id='create-short' v-on:submit.prevent='createShort' method='post'>\n\n        <input id='name' v-model.trim='shortName' type='text' name='shortName'  placeholder=\"Enter Short Name\">\n        <input id='url' v-model.trim='url' type='url' name='url' placeholder=\"Enter URL\">\n\n        <input type='submit' value=\"Create Short\" id=\"createFreet\" class=\"button\">\n\n        <div v-if='success' class=\"success-message\">\n          {{ success }}\n        </div>\n\n        <div v-if='errors.length' class=\"error-message\">\n          <b>Please correct the following error(s):</b>\n          <ul>\n            <li v-for='error in errors' v-bind:key='error.id'>{{ error }}</li>\n          </ul>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"CreateShortForm\",\n\n  data() {\n    return {\n      errors: [],\n      success: \"\",\n      shortName: \"\",\n      url: \"\"\n    };\n  },\n\n  methods: {\n    createShort: function() {\n      this.errors = [];\n\n      if (this.shortName === \"\" || this.url === \"\") {\n        if (this.shortName === \"\") {\n          this.errors.push(\"Short name is required\");\n        }\n\n        if (this.url === \"\") {\n          this.errors.push(\"URL is required\");\n        }\n\n        this.clearMessages();\n      } else {\n        const bodyContent = { shortName: this.shortName, url: this.url };\n        axios\n          .post(\"/api/shorts\", bodyContent)\n          .then(short => {\n            // handle success\n            this.success = \"Short created successfully!\";\n            eventBus.$emit(\"create-short-success\", short);\n          })\n          .catch(err => {\n            // handle error\n            this.errors.push(err.response.data.error);\n          })\n          .then(() => {\n            // always executed\n            this.resetForm();\n            this.clearMessages();\n          });\n      }\n    },\n\n    resetForm: function() {\n      this.shortName = \"\";\n      this.url = \"\";\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.errors = [];\n        this.success = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"]}]}