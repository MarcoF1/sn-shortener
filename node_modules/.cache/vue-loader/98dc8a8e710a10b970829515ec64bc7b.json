{"remainingRequest":"/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/marco/code/sn-shortener/src/components/ShortList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/marco/code/sn-shortener/src/components/ShortList.vue","mtime":1604461671279},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/marco/code/sn-shortener/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTaG9ydExpc3RJdGVtIGZyb20gIi4vU2hvcnRMaXN0SXRlbSI7CgppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gIi4uL21haW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTaG9ydExpc3QiLAoKICBjb21wb25lbnRzOiB7IFNob3J0TGlzdEl0ZW0gfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yOiAiIiwKICAgICAgc3VjY2VzczogIiIsCiAgICAgIHNob3J0czogW10KICAgIH07CiAgfSwKCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICBldmVudEJ1cy4kb24oImNyZWF0ZS1zaG9ydC1zdWNjZXNzIiwgcmVzID0+IHsKICAgICAgdGhpcy5zaG9ydHMucHVzaChyZXMuZGF0YSk7CiAgICB9KTsKCiAgICBldmVudEJ1cy4kb24oInVwZGF0ZS1zaG9ydC1zdWNjZXNzIiwgcmVzID0+IHsKICAgICAgdGhpcy5zdWNjZXNzID0gYFNob3J0IG5hbWUgJHtyZXMuZGF0YS5zaG9ydE5hbWV9IG5vdyByZXNvbHZlcyB0byAkewogICAgICAgIHJlcy5kYXRhLnVybAogICAgICB9YDsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2VzKCk7CiAgICAgIHRoaXMubG9hZFNob3J0cygpOwogICAgfSk7CgogICAgZXZlbnRCdXMuJG9uKCJkZWxldGUtc2hvcnQtc3VjY2VzcyIsIHJlcyA9PiB7CiAgICAgIHRoaXMuc3VjY2VzcyA9IGBTaG9ydCBuYW1lICR7cmVzLnNob3J0TmFtZX0gaGFzIGJlZW4gZGVsZXRlZGA7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB0aGlzLmxvYWRTaG9ydHMoKTsKICAgIH0pOwoKICAgIGV2ZW50QnVzLiRvbigidXBkYXRlLXNob3J0LWVycm9yIiwgcmVzID0+IHsKICAgICAgdGhpcy5lcnJvciA9IGBFcnJvciB1cGRhdGluZyBzaG9ydCAke3Jlcy5kYXRhLnNob3J0TmFtZX1gOwogICAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTsKICAgICAgdGhpcy5sb2FkU2hvcnRzKCk7CiAgICB9KTsKCiAgICBldmVudEJ1cy4kb24oImRlbGV0ZS1zaG9ydC1lcnJvciIsIHJlcyA9PiB7CiAgICAgIHRoaXMuZXJyb3IgPSBgRXJyb3IgZGVsZXRpbmcgc2hvcnQgJHtyZXMuc2hvcnROYW1lfWA7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpOwogICAgICB0aGlzLmxvYWRTaG9ydHMoKTsKICAgIH0pOwogIH0sCgogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2FkU2hvcnRzKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgbG9hZFNob3J0czogZnVuY3Rpb24oKSB7CiAgICAgIGF4aW9zLmdldCgiL2FwaS9zaG9ydHMiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnNob3J0cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKCiAgICBjbGVhck1lc3NhZ2VzOiBmdW5jdGlvbigpIHsKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMuc3VjY2VzcyA9ICIiOwogICAgICAgIHRoaXMuZXJyb3IgPSAiIjsKICAgICAgfSwgNTAwMCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["ShortList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShortList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"subcontainer\">\n    <div class=\"header secondary-header\">\n      Shorts\n    </div>\n    <div>\n      <div v-if='success' class=\"success-message\">\n        {{ success }}\n      </div>\n      <div v-if='error' class=\"error-message\">\n        {{ error }}\n      </div>\n\n      <div class=\"shorts-container\">  \n        <div v-if=\"shorts.length\">\n          <ShortListItem\n            v-for=\"short in shorts\"\n            v-bind:key=\"short.id\"\n            v-bind:short=\"short\"\n          />\n        </div>\n        <div v-else>\n          <p style=\"text-align: center;\">There are no shorts to display. Create one today!</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ShortListItem from \"./ShortListItem\";\n\nimport { eventBus } from \"../main\";\n\nexport default {\n  name: \"ShortList\",\n\n  components: { ShortListItem },\n\n  data() {\n    return {\n      error: \"\",\n      success: \"\",\n      shorts: []\n    };\n  },\n\n  created: function() {\n    eventBus.$on(\"create-short-success\", res => {\n      this.shorts.push(res.data);\n    });\n\n    eventBus.$on(\"update-short-success\", res => {\n      this.success = `Short name ${res.data.shortName} now resolves to ${\n        res.data.url\n      }`;\n      this.clearMessages();\n      this.loadShorts();\n    });\n\n    eventBus.$on(\"delete-short-success\", res => {\n      this.success = `Short name ${res.shortName} has been deleted`;\n      this.clearMessages();\n      this.loadShorts();\n    });\n\n    eventBus.$on(\"update-short-error\", res => {\n      this.error = `Error updating short ${res.data.shortName}`;\n      this.clearMessages();\n      this.loadShorts();\n    });\n\n    eventBus.$on(\"delete-short-error\", res => {\n      this.error = `Error deleting short ${res.shortName}`;\n      this.clearMessages();\n      this.loadShorts();\n    });\n  },\n\n  mounted: function() {\n    this.loadShorts();\n  },\n\n  methods: {\n    loadShorts: function() {\n      axios.get(\"/api/shorts\").then(response => {\n        this.shorts = response.data;\n      });\n    },\n\n    clearMessages: function() {\n      setInterval(() => {\n        this.success = \"\";\n        this.error = \"\";\n      }, 5000);\n    }\n  }\n};\n</script>\n"]}]}